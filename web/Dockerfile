from leonlipe/21.2.0-alpine3.18-rsync-aws:1.0.0
ARG NEXT_PUBLIC_API_URL
ENV NEXT_PUBLIC_API_URL $NEXT_PUBLIC_API_URL
ARG NEXT_PUBLIC_INVEWIN_API_URL
ENV NEXT_PUBLIC_INVEWIN_API_URL $NEXT_PUBLIC_INVEWIN_API_URL
ARG NEXT_PUBLIC_RECAPTCHA_SITE_KEY
ENV NEXT_PUBLIC_RECAPTCHA_SITE_KEY $NEXT_PUBLIC_RECAPTCHA_SITE_KEY
WORKDIR /opt/data/app
COPY . /opt/data/app
RUN yarn
RUN yarn build
EXPOSE 3000
CMD [ "yarn", "start" ]